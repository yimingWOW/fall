import{r as f,c as Be,P as ze,j as e,C as et,W as tt,a as nt,u as le,b as X,d as Ie,O as xe,g as B,N as ot,T as Ce,S as E,L as at,e as rt,f as S,h as T,A as I,i as C,k as l,l as b,m as me,n as R,o as D,p as _,q as ue,s as Re,t as oe,v as pe,w as he,B as ge,x as we,y as st,z as it,D as ct,E as lt,R as dt,H as ut}from"./vendor-BHlMpbV2.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(a){if(a.ep)return;a.ep=!0;const t=o(a);fetch(a.href,t)}})();const De=f.createContext({network:"localnet",setNetwork:()=>{}}),mt=()=>f.useContext(De),pt={"mainnet-beta":Be("mainnet-beta"),devnet:Be("devnet"),localnet:"http://127.0.0.1:8899"},ht=({onChange:n,value:r})=>e.jsx("div",{className:"solana-network-select-container",children:e.jsxs("select",{onChange:o=>n(o.target.value),value:r,className:"solana-network-select",children:[e.jsx("option",{value:"devnet",children:"Devnet"}),e.jsx("option",{value:"localnet",children:"Localnet"}),e.jsx("option",{value:"mainnet-beta",children:"Mainnet"})]})}),gt=({children:n})=>{const[r,o]=f.useState("devnet"),s=f.useMemo(()=>pt[r],[r]),a=f.useMemo(()=>[new ze],[]);return e.jsx(De.Provider,{value:{network:r,setNetwork:o},children:e.jsx(et,{endpoint:s,children:e.jsx(tt,{wallets:a,autoConnect:!0,children:e.jsx(nt,{children:n})})})})},ft="HRrJFxxQzPijk2VbF2ttqBtDUKQXVkytAf1cB5GzJuYB",kt={name:"fall",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},bt=[{name:"borrow",discriminator:[228,253,131,202,207,116,89,18],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_a",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrow_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[102]}]}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"borrower_borrow_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[106]}]}},{name:"borrower",signer:!0},{name:"borrower_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"borrower"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_a",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"borrower"},{kind:"const",value:[103]}]}},{name:"borrower_borrow_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrow_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_collateral_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"collateral_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_borrow_block_height_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrower_borrow_block_height_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"borrow_amount",type:"u64"}]},{name:"create_amm",discriminator:[242,91,21,170,5,68,125,64],accounts:[{name:"amm",writable:!0,pda:{seeds:[{kind:"arg",path:"id"}]}},{name:"admin"},{name:"payer",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"id",type:"pubkey"}]},{name:"create_pool_1",discriminator:[65,185,40,205,113,45,173,179],accounts:[{name:"amm",pda:{seeds:[{kind:"account",path:"amm.id",account:"Amm"}]}},{name:"mint_a"},{name:"mint_b"},{name:"pool",writable:!0,pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"create_pool_2",discriminator:[207,49,43,9,129,200,113,224],accounts:[{name:"amm",pda:{seeds:[{kind:"account",path:"amm.id",account:"Amm"}]}},{name:"mint_a"},{name:"mint_b"},{name:"pool",writable:!0,pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"liquidity_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[98]}]}},{name:"admin"},{name:"admin_fee_account",writable:!0,pda:{seeds:[{kind:"account",path:"admin"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"liquidity_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"deposit_collateral",discriminator:[156,131,142,116,146,247,162,120],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_b",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"borrower_borrow_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[106]}]}},{name:"borrower",signer:!0},{name:"borrower_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"borrower"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_b",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"borrower"},{kind:"const",value:[103]}]}},{name:"borrower_collateral_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"collateral_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_borrow_block_height_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrower_borrow_block_height_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"amount",type:"u64"}]},{name:"deposit_liquidity",discriminator:[245,99,59,25,151,71,233,249],accounts:[{name:"amm",pda:{seeds:[{kind:"account",path:"amm.id",account:"Amm"}]}},{name:"pool",writable:!0,pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"amm"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"mint_a"},{name:"mint_b"},{name:"depositor",docs:["The account paying for all rents"],signer:!0},{name:"liquidity_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[98]}]}},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_liquidity",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"liquidity_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"admin"},{name:"admin_fee_account",writable:!0,pda:{seeds:[{kind:"account",path:"admin"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"liquidity_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",docs:["The account paying for all rents"],writable:!0,signer:!0},{name:"token_program",docs:["Solana ecosystem accounts"],address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"amount_a",type:"u64"},{name:"amount_b",type:"u64"}]},{name:"init_lending_pool_1",discriminator:[111,87,89,249,229,194,59,237],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"mint_a"},{name:"mint_b"},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_pool_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"init_lending_pool_2",discriminator:[70,160,247,111,154,255,24,219],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[101]}]}},{name:"borrow_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[102]}]}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"init_lending_pool_3",discriminator:[226,110,186,213,63,178,83,62],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lender_lending_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[105]}]}},{name:"borrower_borrow_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[106]}]}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"lend",discriminator:[89,34,75,168,122,47,185,45],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_a",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[101]}]}},{name:"lender_lending_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[105]}]}},{name:"lender",signer:!0},{name:"lender_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lender"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_a",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lender_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"lender"},{kind:"const",value:[103]}]}},{name:"lender_lend_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"lender_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"lending_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lender_lending_block_height_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"lender_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"lender_lending_block_height_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",docs:["The account paying for all rents"],writable:!0,signer:!0},{name:"token_program",docs:["Solana ecosystem accounts"],address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"user_lending_amount",type:"u64"}]},{name:"liquidate",discriminator:[223,179,226,125,48,46,39,74],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"mint_a",relations:["pool"]},{name:"mint_b",relations:["pool"]},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrow_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[102]}]}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"trader",signer:!0},{name:"trader_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"trader"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower"},{name:"borrower_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"borrower"},{kind:"const",value:[103]}]}},{name:"borrower_borrow_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrow_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_collateral_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"collateral_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"price",discriminator:[129,85,239,229,61,225,218,20],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"mint_a",relations:["pool"]},{name:"mint_b",relations:["pool"]},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"token_program",docs:["Solana ecosystem accounts"],address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[],returns:{defined:{name:"PriceResult"}}},{name:"redeem",discriminator:[184,12,86,149,70,196,97,225],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"},{kind:"const",value:[97]}]}},{name:"mint_a"},{name:"mint_b"},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"pool.mint_a",account:"Pool"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_pool_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[101]}]}},{name:"borrow_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[102]}]}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"lender_lending_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[105]}]}},{name:"lender",signer:!0},{name:"lender_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lender"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lender_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lender"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lender_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"lender"},{kind:"const",value:[103]}]}},{name:"lender_lending_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"lender_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"lending_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lender_lending_block_height_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"lender_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"lender_lending_block_height_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"repay",discriminator:[234,103,67,82,208,234,219,166],accounts:[{name:"mint_a"},{name:"mint_b"},{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"lending_pool_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[100]}]}},{name:"lending_pool_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lending_pool_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"lending_pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrow_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[102]}]}},{name:"collateral_receipt_token_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[104]}]}},{name:"borrower_borrow_block_height_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[106]}]}},{name:"borrower",signer:!0},{name:"borrower_token_a",writable:!0,pda:{seeds:[{kind:"account",path:"borrower"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_token_b",writable:!0,pda:{seeds:[{kind:"account",path:"borrower"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_authority",pda:{seeds:[{kind:"account",path:"pool"},{kind:"account",path:"borrower"},{kind:"const",value:[103]}]}},{name:"borrower_borrow_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrow_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_collateral_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"collateral_receipt_token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"borrower_borrow_block_height_receipt_token",writable:!0,pda:{seeds:[{kind:"account",path:"borrower_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"borrower_borrow_block_height_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"swap_exact_tokens_for_tokens",discriminator:[249,86,253,50,177,221,73,162],accounts:[{name:"amm",pda:{seeds:[{kind:"account",path:"amm.id",account:"Amm"}]}},{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"mint_a",relations:["pool"]},{name:"mint_b",relations:["pool"]},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"trader",signer:!0},{name:"trader_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"trader"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"trader_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"trader"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",writable:!0,signer:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"swap_a",type:"bool"},{name:"input_amount",type:"u64"},{name:"min_output_amount",type:"u64"}]},{name:"withdraw_liquidity",discriminator:[149,158,33,185,47,243,253,31],accounts:[{name:"pool",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"pool.mint_a",account:"Pool"},{kind:"account",path:"pool.mint_b",account:"Pool"}]}},{name:"pool_authority",pda:{seeds:[{kind:"account",path:"pool.amm",account:"Pool"},{kind:"account",path:"mint_a"},{kind:"account",path:"mint_b"},{kind:"const",value:[97]}]}},{name:"depositor",signer:!0},{name:"liquidity_mint",writable:!0,pda:{seeds:[{kind:"account",path:"pool"},{kind:"const",value:[98]}]}},{name:"mint_a",writable:!0,relations:["pool"]},{name:"mint_b",writable:!0,relations:["pool"]},{name:"pool_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"pool_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"pool_authority"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_liquidity",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"liquidity_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_a",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_a"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"depositor_account_b",writable:!0,pda:{seeds:[{kind:"account",path:"depositor"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint_b"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"payer",docs:["The account paying for all rents"],writable:!0,signer:!0},{name:"token_program",docs:["Solana ecosystem accounts"],address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"amount",type:"u64"}]}],yt=[{name:"Amm",discriminator:[143,245,200,17,74,214,196,135]},{name:"Pool",discriminator:[241,154,109,4,17,177,109,188]}],wt=[{code:6e3,name:"CalculationError",msg:"Calculation error"},{code:6001,name:"CalculationError1",msg:"Calculation error"},{code:6002,name:"InvalidFee",msg:"Invalid fee"}],xt=[{name:"Amm",type:{kind:"struct",fields:[{name:"id",docs:["Primary key of the AMM"],type:"pubkey"},{name:"admin",docs:["Account that has admin authority over the AMM"],type:"pubkey"},{name:"liquidity_fee",docs:["liquidity fee percentage: 100000 = 100%"],type:"u16"},{name:"protocol_fee_percentage",docs:["Protocol fee percentage of the liquidity fee (0-100)","e.g., 10000 means 100% of liquidity fee goes to protocol"],type:"u16"}]}},{name:"Pool",type:{kind:"struct",fields:[{name:"amm",docs:["Primary key of the AMM"],type:"pubkey"},{name:"mint_a",docs:["Mint of token A"],type:"pubkey"},{name:"mint_b",docs:["Mint of token B"],type:"pubkey"},{name:"token_a_amount",docs:["借贷池中token a的数量"],type:"u64"},{name:"token_b_amount",docs:["借贷池中token b的数量"],type:"u64"},{name:"borrow_interest_accumulator_block_height",docs:["记录上次借贷池interest_step更新时的区块高度"],type:"u64"},{name:"borrow_interest_accumulator",docs:["借款累计利息，随着区块高度增加而增加，但是增加幅度与资金借出量正相关"],type:"u64"},{name:"share_lending_block_height",docs:["共享借贷累加器区块高度"],type:"u64"},{name:"share_lending_accumulator",docs:["共享借贷累加器，资金借出量的时间积分"],type:"u64"}]}},{name:"PriceResult",type:{kind:"struct",fields:[{name:"token_a_amount",type:"u64"},{name:"token_b_amount",type:"u64"}]}}],_t=[{name:"AUTHORITY_SEED",type:"bytes",value:"[97]"},{name:"BASE_INTEREST_RATE",type:"u64",value:"5"},{name:"BORROWER_AUTHORITY_SEED",type:"bytes",value:"[103]"},{name:"BORROWER_BORROW_BLOCK_HEIGHT_TOKEN_SEED",type:"bytes",value:"[106]"},{name:"BORROW_TOKEN_SEED",type:"bytes",value:"[102]"},{name:"COLLATERAL_TOKEN_SEED",type:"bytes",value:"[104]"},{name:"LENDER_LENDING_BLOCK_HEIGHT_TOKEN_SEED",type:"bytes",value:"[105]"},{name:"LENDING_AUTHORITY_SEED",type:"bytes",value:"[100]"},{name:"LENDING_TOKEN_SEED",type:"bytes",value:"[101]"},{name:"LIQUIDITY_SEED",type:"bytes",value:"[98]"},{name:"MINIMUM_LIQUIDITY",type:"u64",value:"10"},{name:"MIN_COLLATERAL_RATIO",type:"u64",value:"10000"},{name:"PERCENT_BASE",type:"u64",value:"10000"}],P={address:ft,metadata:kt,instructions:bt,accounts:yt,errors:wt,types:xt,constants:_t},H="a",se="b",J="d",ie="e",Y="f",z="g",ee="h",fe="i",ke="j",_e=1e4,ve=1e4,vt="GUXNPX5ci1Qj76MZe2aRJ33zK48VmT6gXVyR86CsF4T5",ce="EisXsrG1aCoaJTFSDdXTBRAEAZP46wPWkKJpF7RfC3DV",$=({isActive:n,onClick:r,icon:o,label:s})=>e.jsx("button",{className:`tab-button ${n?"active":""}`,onClick:r,children:e.jsxs("div",{className:"section-title",children:[o,s]})}),At=()=>{const{publicKey:n}=le(),r=X(),s=Ie().pathname.split("/")[1]||"guide",a=t=>{r(`/${t}`)};return e.jsxs("div",{className:"dashboard",children:[e.jsxs("nav",{className:"tab-nav",children:[(n==null?void 0:n.toBase58())===vt&&e.jsx($,{isActive:s==="amm",onClick:()=>a("amm"),icon:"⚙️",label:"AMM"}),e.jsx($,{isActive:s==="introduction",onClick:()=>a("introduction"),icon:"📖",label:"Introduction"}),e.jsx($,{isActive:s==="guide",onClick:()=>a("guide"),icon:"📚",label:"Guide"}),e.jsx($,{isActive:s==="swap",onClick:()=>a("swap"),icon:"↔️",label:"Long/Short"}),e.jsx($,{isActive:s==="farm",onClick:()=>a("farm"),icon:"🌾",label:"Farm"}),e.jsx($,{isActive:s==="lend",onClick:()=>a("lend"),icon:"💰",label:"Lend"}),e.jsx($,{isActive:s==="borrow",onClick:()=>a("borrow"),icon:"🏦",label:"Borrow"}),e.jsx($,{isActive:s==="liquidate",onClick:()=>a("liquidate"),icon:"⚡",label:"Liquidate"})]}),e.jsx("div",{className:"dashboard-content",children:e.jsx(xe,{})})]})};async function Nt(n,r,o){try{const s=await B(ot,r.publicKey),a=new Ce;a.add(E.transfer({fromPubkey:r.publicKey,toPubkey:s,lamports:o*at})),a.add(rt(s));const t=await n.getLatestBlockhash();a.recentBlockhash=t.blockhash,a.feePayer=r.publicKey;const i=await r.signTransaction(a),c=await n.sendRawTransaction(i.serialize());return await n.confirmTransaction({signature:c,...t}),c}catch(s){throw console.error("Error wrapping SOL:",s),s}}const jt=({onSuccess:n})=>{const r=S(),{connection:o}=T(),[s,a]=f.useState(""),[t,i]=f.useState(!1),[c,u]=f.useState(""),m=async d=>{if(d.preventDefault(),a(""),i(!0),!r){a("Please connect your wallet first"),i(!1);return}if(!c||isNaN(Number(c))||Number(c)<=0){a("Please enter a valid amount"),i(!1);return}try{const h=await Nt(o,r,Number(c));console.log(`Transaction URL: https://explorer.solana.com/tx/${h}`),n(h),u("")}catch(h){console.error("Error wrapping SOL:",h),a(h instanceof Error?h.message:"Failed to wrap SOL")}finally{i(!1)}};return e.jsxs("div",{className:"wrapper",children:[s&&e.jsx("div",{className:"secondary-text",style:{color:"var(--error)"},children:s}),e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{style:{marginBottom:"var(--spacing-md)"},children:e.jsx("input",{type:"number",value:c,onChange:d=>u(d.target.value),placeholder:"Enter SOL amount",step:"any",min:"0",className:"input-field",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid var(--border-color)"}})}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:t||!r||!c,children:t?"Processing...":"Wrap SOL"})})]})]})},Pt="/fall/assets/guide_pic_1-BISUfyi8.png",Se=()=>e.jsxs("div",{className:"card-container",children:[e.jsx("h1",{className:"title",children:"Getting Started with Fall Protocol"}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"Prerequisites"}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"1. Enable Devnet in Phantom Wallet"}),e.jsx("p",{children:"Open Phantom wallet settings → Developer Settings → Open Testnet Mode"}),e.jsx("img",{src:Pt,alt:"Enable Devnet in Phantom",className:"guide-image"})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"2. Get Devnet Token"}),e.jsxs("p",{children:["Obtain Devnet SOL from the ",e.jsx("a",{className:"text-link",href:"https://faucet.solana.com/",target:"_blank",rel:"noopener noreferrer",children:"Solana Faucet"})]}),e.jsxs("p",{children:["Obtain Devnet USDT tokens from the ",e.jsx("a",{className:"text-link",href:"https://spl-token-faucet.com/?token-name=USDT",target:"_blank",rel:"noopener noreferrer",children:"SPL Token Faucet"})]})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"3. Convert SOL to WSOL for trading in Wsol-USDT Pool"}),e.jsx(jt,{onSuccess:()=>{}})]})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"Using the Protocol"}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"1. Connect Your Wallet"}),e.jsx("p",{children:'Use the "Connect Wallet" button in the top right corner'})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"2. Start Trading"}),e.jsx("p",{children:"You can trade on the swap page and you can influence the price then liquidate the borrower's position"})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"3. Be a Farmer"}),e.jsx("p",{children:"Deposit your Token into the liquidity pool to start earning fees"})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"4. Long-term bullish on a meme"}),e.jsx("p",{children:"Visit the Lend page to lend your meme tokens and earn yields. Forget about it, and one day look back and it might have been to the moon"})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"5. Short worthless memes"}),e.jsx("p",{children:"Go to the Borrow page and short those Shittcoins!"}),e.jsxs("ul",{className:"feature-list",children:[e.jsx("li",{children:"Deposit stablecoins as collateral"}),e.jsx("li",{children:"Borrow meme tokens"}),e.jsx("li",{children:"Sell borrowed meme when prices are high"}),e.jsx("li",{children:"Buy back meme at lower prices, repay the borrowed meme and have a leisurely glass of Coke"})]})]}),e.jsxs("div",{className:"step",children:[e.jsx("h3",{children:"6. Liquidate the borrower's position"}),e.jsx("p",{children:"Visit the Liquidate page to liquidate the borrower's position"})]})]})]});async function Bt(n,r,o,s,a,t,i,c,u){try{const m=new I(r,n,{preflightCommitment:"confirmed"}),d=new C(P,m),[h]=l.findProgramAddressSync([s.toBuffer(),a.toBuffer(),t.toBuffer(),b.Buffer.from(H)],d.programId),p=await B(a,h,!0),g=await B(t,h,!0),k=await B(a,n.publicKey,!0),w=await B(t,n.publicKey,!0);console.log(p,g,k,w),console.log("swapAtoB",i);const y=new me.BN(Math.floor(c)),v=new me.BN(Math.floor(u));console.log("inputAmountBN",y),console.log("minOutputAmountBN",v);const x=await d.methods.swapExactTokensForTokens(i,y,v).accounts({amm:s,pool:o,poolAuthority:h,trader:n.publicKey,mintA:a,mintB:t,poolAccountA:p,poolAccountB:g,traderAccountA:k,traderAccountB:w,payer:n.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc();return console.log("tx",x),x}catch(m){throw console.error("Error in swap:",m),m}}async function Me(n,r){try{const o=new I(r,n,{preflightCommitment:"confirmed"});return(await new C(P,o).account.pool.all()).map(t=>({poolPk:new l(t.publicKey.toString()),amm:new l(t.account.amm.toString()),mintA:new l(t.account.mintA.toString()),mintB:new l(t.account.mintB.toString()),tokenAAmount:t.account.tokenAAmount.toString(),tokenBAmount:t.account.tokenBAmount.toString(),displayName:`${t.account.mintA.toString().slice(0,4)}...${t.account.mintB.toString().slice(0,4)}`}))}catch(o){throw console.error("Error fetching pool accounts:",o),o}}const K="/fall/assets/favicon-BobBXiHe.png";async function de(n,r,o,s){try{const a=new I(r,n,{commitment:"confirmed",preflightCommitment:"confirmed"}),t=new C(P,a),i=await t.account.pool.fetch(o);let c;try{c=await t.account.amm.fetch(i.amm),console.log("amm",c)}catch(ye){console.log("amm",ye)}const u=new l(i.mintA),m=new l(i.mintB),[d]=l.findProgramAddressSync([o.toBuffer(),s.toBuffer(),b.Buffer.from(z)],new l(P.address)),[h]=l.findProgramAddressSync([i.amm.toBuffer(),u.toBuffer(),m.toBuffer(),b.Buffer.from(H)],t.programId),[p]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(se)],new l(P.address)),[g]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],new l(P.address)),[k]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ie)],new l(P.address)),[w]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],new l(P.address)),[y]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ee)],new l(P.address)),[v]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(se)],t.programId),[x]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],t.programId),[A]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ie)],t.programId),[L]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(fe)],t.programId);console.log("lendingPoolAuthorityPda",x);let M,q;try{M=await _.token.associatedAddress({mint:u,owner:x}),q=await ae(r,M).catch(()=>!1)}catch(ye){console.error("Error getting lendingPoolAccountA:",ye),q=!1}console.log("lendingPoolAccountA",q);const[O,Z,U,V,te,ne,be,N,j,W,Q,Ge,He,Ue,Ve,Qe,Je,Ze,$e]=await Promise.all([ae(r,o).catch(()=>!1),ae(r,v).catch(()=>!1),ae(r,A).catch(()=>!1),ae(r,L).catch(()=>!1),G(r,h,i.mintA).catch(()=>0),G(r,h,i.mintB).catch(()=>0),G(r,c.admin,p).catch(()=>0),G(r,g,i.mintA).catch(()=>0),G(r,g,i.mintB).catch(()=>0),ue(r,p).catch(()=>({supply:0})),ue(r,k).catch(()=>({supply:0})),ue(r,w).catch(()=>({supply:0})),ue(r,y).catch(()=>({supply:0})),G(r,s,u).catch(()=>0),G(r,s,m).catch(()=>0),G(r,s,p).catch(()=>0),G(r,d,k).catch(()=>0),G(r,d,w).catch(()=>0),G(r,d,y).catch(()=>0)]),Xe=te===0?0:Number(ne)/Number(te),Ye=ne===0?0:Number(te)/Number(ne);return{poolStatus:{createPool1:O,createPool2:Z,initLendingPool1:q,initLendingPool2:U,initLendingPool3:V},poolInfo:{poolPk:o,amm:i.amm,admin:c.admin,mintA:u,mintB:m,liquidityMintAmount:Number(W.supply),adminFeeAmount:Number(be),aToB:Xe,bToA:Ye,tokenASymbol:u.toString().slice(0,4),tokenBSymbol:m.toString().slice(0,4),tokenAIcon:K,tokenBIcon:K,tokenAAmount:Number(te),tokenBAmount:Number(ne)},lendingPoolInfo:{tokenAAmount:Number(N),tokenBAmount:Number(j),lendingReceiptSupply:Number(Q.supply),borrowReceiptSupply:Number(Ge.supply),collateralReceiptSupply:Number(He.supply),addresses:{lendingReceipt:k.toString(),borrowReceipt:w.toString(),collateralReceipt:y.toString()}},userAssets:{tokenAAmount:Ue.toString(),tokenBAmount:Ve.toString(),liquidityAmount:Qe.toString(),lendingReceiptAmount:Je.toString(),borrowReceiptAmount:Ze.toString(),collateralReceiptAmount:$e.toString()}}}catch(a){return console.error("Error getting lending pool details:",a),{poolStatus:{createPool1:!1,createPool2:!1,initLendingPool1:!1,initLendingPool2:!1,initLendingPool3:!1},poolInfo:{poolPk:new l(o),amm:new l(""),admin:new l(""),mintA:new l(""),mintB:new l(""),liquidityMintAmount:0,adminFeeAmount:0,aToB:0,bToA:0,tokenAAmount:0,tokenBAmount:0},lendingPoolInfo:{tokenAAmount:0,tokenBAmount:0,lendingReceiptSupply:0,borrowReceiptSupply:0,collateralReceiptSupply:0,addresses:{lendingReceipt:"",borrowReceipt:"",collateralReceipt:""}},userAssets:{tokenAAmount:"0",tokenBAmount:"0",liquidityAmount:"0",lendingReceiptAmount:"0",borrowReceiptAmount:"0",collateralReceiptAmount:"0"}}}}async function G(n,r,o){try{const s=await B(o,r,!0),a=await Re(n,s);return Number(a.amount)}catch(s){return console.log("getUserTokenAmount",s),0}}async function ae(n,r){return await n.getAccountInfo(r)!==null}const St=()=>{const n=S(),{connection:r}=T(),[o,s]=f.useState(!1),[a,t]=f.useState(!0),[i,c]=f.useState(null),[u,m]=f.useState([]),[d,h]=f.useState(null),[p,g]=f.useState(""),[k,w]=f.useState(!1),[y,v]=f.useState({inputAmount:"",minOutputAmount:""}),[x,A]=f.useState("1.0"),[L,M]=f.useState(""),q=async()=>{try{if(!n)return;const N=await de(n,r,new l(d.poolPk),n.publicKey);c(N)}catch(N){console.error("Error fetching pool details:",N)}};f.useEffect(()=>{(async()=>{if(n&&r)try{const j=await Me(n,r);m(j)}catch(j){console.error("Error fetching pools:",j)}})()},[n,r]),f.useEffect(()=>{d&&q()},[d]);const O=u.filter(N=>{var j;return(j=N.displayName)==null?void 0:j.toLowerCase().includes(p.toLowerCase())}),Z=N=>{h(N),w(!1),g(N.displayName||"")},U=N=>{if(!i||!N)return"";const j=parseFloat(N);if(isNaN(j))return"";const W=a?i.poolInfo.aToB:i.poolInfo.bToA,Q=j*W;return Math.round(Q).toString()},V=(N,j)=>{const W=N.target.value;if(j==="input"){const Q=U(W);v({inputAmount:W,minOutputAmount:Q})}else v(Q=>({...Q,minOutputAmount:W}))},te=()=>{t(!a),v({inputAmount:"",minOutputAmount:""})},ne=N=>{const j=N.target.value;(j===""||parseFloat(j)>=0&&parseFloat(j)<=100)&&A(j)},be=async N=>{if(N.preventDefault(),!(!n||!y.inputAmount||!d)){s(!0),M("");try{const j=(100-parseFloat(x))/100,W=Math.round(parseFloat(y.inputAmount)),Q=Math.round(parseFloat(y.minOutputAmount)*j);await Bt(n,r,new l(d.poolPk),new l(d.amm),new l(d.mintA),new l(d.mintB),a,W,Q),v({inputAmount:"",minOutputAmount:""})}catch(j){const W=j.message||"An unknown error occurred";console.error("Swap error:",j),M(W)}finally{s(!1)}}};return e.jsx("div",{className:"wrapper",children:e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{className:"pool-select",onClick:()=>w(!k),children:[d?e.jsx("span",{children:d.displayName}):e.jsx("span",{className:"placeholder",children:"Select a pool"}),e.jsx("span",{className:"dropdown-arrow",children:"▼"})]}),k&&e.jsxs("div",{className:"step",children:[e.jsx("input",{type:"text",value:p,onChange:N=>g(N.target.value),placeholder:"Search pools...",onClick:N=>N.stopPropagation(),autoFocus:!0}),e.jsxs("div",{className:"body-text",children:[O.map(N=>e.jsx("div",{className:"pool-option",onClick:()=>Z(N),children:N.displayName},N.poolPk.toString())),O.length===0&&e.jsx("div",{className:"no-results",children:"No pools found"})]})]}),d&&e.jsxs("div",{className:"wrapper-container",children:[e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"input-header",children:"You're Selling"}),e.jsxs("div",{className:"token-section",children:[e.jsx("div",{className:"token-selector",children:a?"Token A":"Token B"}),e.jsx("input",{type:"number",value:y.inputAmount,onChange:N=>V(N,"input"),placeholder:"0.00",disabled:o})]})]}),e.jsx("button",{type:"button",className:"swap-direction-toggle",onClick:te,"aria-label":"Switch swap direction"}),e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"input-header",children:"You're Buying"}),e.jsxs("div",{className:"token-section",children:[e.jsx("div",{className:"token-selector",children:a?"Token B":"Token A"}),e.jsx("input",{type:"number",value:y.minOutputAmount,onChange:N=>V(N,"output"),placeholder:"0.00",disabled:o})]})]}),e.jsx("div",{className:"wrapper-box",children:e.jsxs("div",{className:"token-section",children:[e.jsx("div",{className:"input-header",children:"Slippage Tolerance"}),e.jsx("input",{type:"number",value:x,onChange:ne,placeholder:"1.0",step:"0.1",min:"0",max:"100"}),e.jsx("div",{className:"token-selector",children:"%"})]})}),L&&e.jsx("div",{className:"error-message",style:{color:"red",marginTop:"10px",padding:"10px",backgroundColor:"rgba(255, 0, 0, 0.1)",borderRadius:"4px"},children:L}),e.jsx("button",{type:"submit",className:"button btn-primary",disabled:o||!n||!y.inputAmount||!d,children:o?"Swapping...":d?"Enter an amount":"Select a pool"})]})]})})},Ae=({showCreatePool:n=!1,onCreatePool:r})=>{const o=S(),{connection:s}=T(),a=X(),t=Ie(),[i,c]=f.useState([]),[u,m]=f.useState(!0),d=async()=>{try{if(m(!0),!o)return;const p=await Me(o,s);c(p)}catch(p){console.error("Error fetching pools:",p)}finally{m(!1)}};f.useEffect(()=>{d()},[s,o]);const h=(p,g)=>{g.stopPropagation();const k=t.pathname.split("/")[1];a(`/${k}/${p.poolPk.toString()}`)};return e.jsx("div",{className:"tap-page",children:u?e.jsx("div",{className:"loading-spinner"}):e.jsxs("div",{className:"section",children:[n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"right-location-button",children:e.jsx("button",{className:"button btn-primary",onClick:r,children:"Create Pool"})}),e.jsx("div",{className:"section"})]}),i.length===0?e.jsx("span",{className:"code-text",children:"No pools available"}):i.map(p=>e.jsx("div",{className:"step",children:e.jsxs("div",{className:"row-align-center",children:[e.jsxs("div",{className:"token-pair-container",children:[e.jsx("img",{src:p.tokenAIcon||K,alt:p.tokenASymbol||"Token A",className:"token-icon",onError:g=>{g.target.src=K}}),e.jsx("div",{className:"swap-direction-toggle"}),e.jsx("img",{src:p.tokenBIcon||K,alt:p.tokenBSymbol||"Token B",className:"token-icon",onError:g=>{g.target.src=K}})]}),e.jsx("span",{className:"body-text",children:"Trading Pair: "}),e.jsxs("span",{className:"code-text address-pair",children:[e.jsxs("span",{children:[p.mintA.toString().slice(0,4),"...",p.mintA.toString().slice(-4)]}),e.jsx("span",{className:"secondary-text",children:"/"}),e.jsxs("span",{children:[p.mintB.toString().slice(0,4),"...",p.mintB.toString().slice(-4)]})]}),e.jsx("span",{className:"body-text",children:"Pool Address: "}),e.jsxs("span",{className:"code-text",children:[p.poolPk.toString().slice(0,4),"...",p.poolPk.toString().slice(-4)]}),e.jsx("button",{className:"button btn-primary",onClick:g=>h(p,g),children:"Details"})]})},p.poolPk.toString()))]})})},Tt=()=>e.jsxs("div",{children:[e.jsx(Ae,{}),e.jsx(xe,{}),"  "]}),Lt=()=>e.jsxs("div",{children:[e.jsx(Ae,{}),e.jsx(xe,{})]});async function Et(n,r,o,s){try{console.log("Executing liquidate...");const a=new I(r,n,{preflightCommitment:"confirmed"}),t=new C(P,a),i=await t.account.pool.fetch(o),c=i.mintA,u=i.mintB,[m]=l.findProgramAddressSync([i.amm.toBuffer(),c.toBuffer(),u.toBuffer(),b.Buffer.from(H)],t.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],t.programId),[h]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],t.programId),[p]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ee)],t.programId),[g]=l.findProgramAddressSync([o.toBuffer(),s.toBuffer(),b.Buffer.from(z)],t.programId),k=await _.token.associatedAddress({mint:h,owner:g}),w=await _.token.associatedAddress({mint:p,owner:g}),y=oe(u,a.wallet.publicKey,!0),v=pe.setComputeUnitLimit({units:2e8});console.log("Sending liquidate transaction...");const x=await t.methods.liquidate().accounts({pool:o,poolAuthority:m,mintA:c,mintB:u,lendingPoolAuthority:d,borrowReceiptTokenMint:h,collateralReceiptTokenMint:p,trader:a.wallet.publicKey,traderAccountB:y,borrower:s,borrowerBorrowReceiptToken:k,borrowerCollateralReceiptToken:w,payer:a.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).preInstructions([v]).rpc();return console.log("Liquidate transaction signature:",x),{tx:x,accounts:{poolKey:o,poolAuthority:m,lendingPoolAuthority:d,borrowReceiptTokenMint:h,collateralReceiptTokenMint:p,traderAccountB:y,borrowerBorrowReceiptToken:k,borrowerCollateralReceiptToken:w}}}catch(a){throw console.error("Error in liquidate:",a),a instanceof Error&&console.error("Error details:",{message:a.message,stack:a.stack}),a}}async function It(n,r){const o=new l(r),s={limit:10},a=await n.getSignaturesForAddress(o,s),t=new Set;for(const i of a){const c=await n.getTransaction(i.signature);!c||!c.meta||c.transaction.message.accountKeys.forEach((u,m)=>{c.transaction.message.isAccountSigner(m)&&t.add(u.toBase58())})}return console.log("Recent transactions:",a.length),console.log("Unique signers:",t.size),Array.from(t).map(i=>new l(i))}async function Ct(n,r,o){try{const s=new I(o,n,{preflightCommitment:"confirmed"}),a=new C(P,s);if(!await a.account.pool.fetch(r))throw new Error("Pool account not found");const i=await de(n,o,r,n.publicKey),[c]=l.findProgramAddressSync([r.toBuffer(),b.Buffer.from(Y)],a.programId),[u]=l.findProgramAddressSync([r.toBuffer(),b.Buffer.from(ee)],a.programId),m=await It(o,a.programId.toString());if(!m||m.length===0)return console.log("No accounts found for the program"),[];const d=[];for(const h of m)try{console.log("Processing account:",h.toString());const[p]=l.findProgramAddressSync([r.toBuffer(),h.toBuffer(),b.Buffer.from(z)],new l(P.address)),g=await Te(o,p,c),k=await Te(o,p,u);k<g*i.poolInfo.aToB*_e/ve&&d.push({userAuthorityPda:h,collateralReceiptTokenAmount:k,borrowReceiptTokenAmount:g})}catch(p){console.error("Error processing account:",h.toString(),p);continue}return d}catch(s){throw console.error("Error fetching pool accounts:",s),s instanceof Error&&(console.error("Error details:",s.message),console.error("Stack trace:",s.stack)),s}}async function Te(n,r,o){try{const s=await B(o,r,!0),a=await Re(n,s);return Number(a.amount)}catch(s){return console.log("getUserTokenAmount",s),0}}const F=({label:n,address:r})=>{const o=s=>s?`${s}`:"";return e.jsxs("div",{className:"address-label",children:[e.jsxs("span",{className:"body-text",children:[n,":"]}),e.jsx("span",{className:"code-text",children:o(r||"")})]})},Le=()=>{const n=X(),{poolAddress:r}=he(),o=S(),{connection:s}=T(),[a,t]=f.useState(""),[i,c]=f.useState(r?new l(r):void 0),[u,m]=f.useState(""),[d,h]=f.useState([]),[p,g]=f.useState(!1),[k,w]=f.useState(null);f.useEffect(()=>{r&&o&&y(new Event("submit"))},[r,o]);const y=async x=>{if(x.preventDefault(),!o||!i){t("Please connect wallet and enter pool address");return}r||n(`/liquidate/${i.toString()}`);try{t(""),g(!0);const A=await Ct(o,i,s);console.log(A),h(A)}catch(A){console.error("Error fetching pending liquidations:",A),t(A instanceof Error?A.message:"Failed to fetch pending liquidations"),h([])}finally{g(!1)}},v=async x=>{if(t(""),w(x.toString()),!o){t("Please connect your wallet first"),w(null);return}if(!i){t("Invalid pool address"),w(null);return}try{const A=await Et(o,s,i,x);console.log(`Transaction URL: https://explorer.solana.com/tx/${A.tx}`),m(A.tx),y(new Event("submit"))}catch(A){console.error("Error liquidating position:",A),t(A instanceof Error?A.message:"Failed to liquidate. Please try again.")}finally{w(null)}};return e.jsx("div",{className:"tap-page",children:e.jsx("div",{className:"card-container",children:e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:"Liquidate Positions"}),a&&e.jsx("div",{className:"body-text",style:{color:"var(--error)",marginBottom:"var(--spacing-md)"},children:a}),u&&e.jsxs("div",{className:"code-text",style:{color:"var(--primary)",marginBottom:"var(--spacing-md)"},children:["Liquidation successful!",e.jsx("a",{href:`https://explorer.solana.com/tx/${u}`,target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"var(--spacing-xs)"},children:"View transaction"})]}),e.jsx("div",{className:"section",children:!r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"code-text",children:e.jsx("span",{className:"body-text",children:"Pool PublicKey (Could get from Lend page)"})}),e.jsxs("div",{style:{display:"flex",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:[e.jsx("input",{className:"input",type:"text",value:i==null?void 0:i.toString(),onChange:x=>c(new l(x.target.value)),placeholder:"Enter pool address"}),e.jsx("button",{onClick:y,disabled:p||!o||!i,className:"button btn-primary",style:{minWidth:"auto"},children:p?"Searching...":"Search"})]})]})}),e.jsx("div",{className:"section",children:p?e.jsxs("div",{className:"code-text",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{className:"body-text",children:"Loading pending Bankrupts..."})]}):d.length===0?e.jsx("div",{className:"code-text",children:e.jsx("span",{className:"body-text",children:"No pending Bankrupts found"})}):e.jsx("div",{className:"section",children:d.map((x,A)=>e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"Bankrupt Address",address:x.userAuthorityPda.toString()}),e.jsx("span",{className:"body-text",children:"Borrow/Collateral:"}),e.jsxs("span",{className:"code-text",children:[x.borrowReceiptTokenAmount.toString(),"/",x.collateralReceiptTokenAmount.toString()]}),e.jsx("button",{onClick:()=>v(x.userAuthorityPda),disabled:k===x.userAuthorityPda.toString(),className:"button btn-primary",children:k===x.userAuthorityPda.toString()?"Processing...":"Liquidate and earn"})]})},A))})})]})})})},Rt=async(n,r)=>{console.log("Getting AMM accounts connection:",r);const o=new I(r,n,{preflightCommitment:"confirmed"}),a=await new C(P,o).account.amm.all();for(const t of a)console.log("AMM Account Details:",{publicKey:t.publicKey.toString(),id:t.account.id.toString(),admin:t.account.admin.toString()});return a.map(t=>({pubkey:t.publicKey.toString(),ammid:t.account.id.toString(),admin:t.account.admin.toString()}))},qe=f.createContext(void 0),Dt=({children:n})=>{const r=S(),{connection:o}=T(),[s,a]=f.useState(null),[t,i]=f.useState([]),[c,u]=f.useState(!1),[m,d]=f.useState(null),h=g=>{console.log("Selected AMM:",g.pubkey),a(g)},p=async()=>{if(r){u(!0),d(null);try{const g=await Rt(r,o);i(g),g.length>0&&!s&&h(g[0])}catch(g){console.error("Error fetching AMMs:",g),d(g instanceof Error?g.message:"Failed to fetch AMMs")}finally{u(!1)}}};return f.useEffect(()=>{p()},[r,o]),e.jsx(qe.Provider,{value:{amm:s,amms:t,setAmm:a,selectAmm:h,isLoading:c,error:m,refreshAmms:p},children:n})},Fe=()=>{const n=f.useContext(qe);if(!n)throw new Error("useAmm must be used within an AmmProvider");return n};async function Mt(n,r,o){try{const s=new I(r,n,{preflightCommitment:"confirmed"}),a=new C(P,s),[t]=l.findProgramAddressSync([o.toBuffer()],a.programId);return await a.methods.createAmm(o).accounts({amm:t,admin:ce,payer:s.wallet.publicKey,systemProgram:E.programId}).rpc()}catch(s){throw console.error("Error details:",s),s}}const qt=()=>{const n=S(),{connection:r}=T(),[o,s]=f.useState(""),[a,t]=f.useState("500"),[i,c]=f.useState(!1),[u,m]=f.useState(""),d=async h=>{if(h.preventDefault(),s(""),c(!0),!n){s("Please connect your wallet first"),c(!1);return}const p=Number(a);if(p<1||p>1e4){s("Fee must be between 1 and 10000"),c(!1);return}try{const g=l.unique(),k=await Mt(n,r,g);console.log(`Transaction URL: https://explorer.solana.com/tx/${k}`),m(g.toString()),t("500")}catch(g){console.error("Error creating AMM:",g),s(g instanceof Error?g.message:"Failed to create AMM. Please try again.")}finally{c(!1)}};return e.jsxs("div",{className:"create-amm-container",children:[o&&e.jsx("div",{className:"error-message",children:o}),u&&e.jsxs("div",{className:"success-message",children:["AMM created successfully! ID: ",u]}),e.jsx("form",{onSubmit:d,className:"form",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!n,children:i?"Creating...":"Create AMM"})})]})},Ft=()=>{const{amms:n,selectAmm:r,isLoading:o,error:s}=Fe();return e.jsxs("div",{className:"tap-page",children:[e.jsx("h2",{children:"Existing AMMs"}),s&&e.jsx("div",{className:"error-message",children:s}),o?e.jsx("div",{children:"Loading AMMs..."}):n.length===0?e.jsx("div",{className:"card-container",children:e.jsx("p",{children:"No AMMs found"})}):e.jsx("div",{className:"card-container",children:n.map(a=>e.jsx("div",{onClick:()=>r(a),children:e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"body-text",children:"AMM Pubkey:"}),e.jsx("span",{className:"code-text",children:a.pubkey})]}),e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"body-text",children:"AMM ID:"}),e.jsxs("span",{className:"code-text",children:[a.ammid," bps"]})]}),e.jsxs("div",{className:"step",children:[e.jsx("span",{className:"body-text",children:"AMM Admin:"}),e.jsxs("span",{className:"code-text",children:[a.admin," bps"]})]})]})},a.pubkey))}),e.jsx(qt,{})]})},Kt=()=>{const n=X();return e.jsx("div",{children:e.jsx(Ae,{showCreatePool:!0,onCreatePool:()=>n("/farm/create")})})};async function Ot(n,r,o,s){try{console.log("Executing lend...");const a=new I(r,n,{preflightCommitment:"confirmed"}),t=new C(P,a),i=await t.account.pool.fetch(o),c=i.mintA,u=i.mintB,[m]=l.findProgramAddressSync([i.amm.toBuffer(),c.toBuffer(),u.toBuffer(),b.Buffer.from(H)],t.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],t.programId),[h]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ie)],t.programId),[p]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],t.programId),[g]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(fe)],t.programId),k=oe(c,d,!0),w=oe(u,d,!0),y=await _.token.associatedAddress({mint:c,owner:a.wallet.publicKey}),[v]=l.findProgramAddressSync([o.toBuffer(),a.wallet.publicKey.toBuffer(),b.Buffer.from(z)],t.programId),x=await _.token.associatedAddress({mint:h,owner:v}),A=await _.token.associatedAddress({mint:g,owner:v});return{tx:await t.methods.lend(new ge(s)).accounts({pool:o,lendingPoolAuthority:d,lendingPoolTokenA:k,lendingReceiptTokenMint:h,lenderLendingBlockHeightMint:g,lender:a.wallet.publicKey,lenderTokenA:y,lenderAuthority:v,lenderLendReceiptToken:x,lenderLendingBlockHeightReceiptToken:A,payer:a.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc(),accounts:{poolAuthority:m,lendingPoolAuthority:d,lendingReceiptTokenMint:h,borrowReceiptTokenMint:p,lendingPoolTokenA:k,lendingPoolTokenB:w,lenderTokenA:y,lenderLendReceiptToken:x,lenderLendingBlockHeightReceiptToken:A}}}catch(a){throw console.error("Error in lend:",a),a instanceof Error&&console.error("Error details:",{message:a.message,stack:a.stack}),a}}const Wt=({pool:n,onSuccess:r})=>{const o=S(),{connection:s}=T(),[a,t]=f.useState(""),[i,c]=f.useState(!1),[u,m]=f.useState(""),d=async h=>{if(h.preventDefault(),t(""),c(!0),!o){t("Please connect your wallet first"),c(!1);return}try{const p=parseFloat(u);if(isNaN(p)||p<=0)throw new Error("Invalid amount");const g=new l(n.poolPk),k=await Ot(o,s,g,new ge(p));console.log(`Transaction URL: https://explorer.solana.com/tx/${k.tx}`),m(""),r(k.tx)}catch(p){console.error("Error lending:",p),t(p instanceof Error?p.message:"Failed to lend")}finally{c(!1)}};return e.jsx("div",{className:"wrapper",children:e.jsx("form",{onSubmit:d,children:e.jsxs("div",{className:"wrapper-container",children:[e.jsx("div",{className:"wrapper-header",children:a&&e.jsx("div",{className:"error-message",children:a})}),e.jsx("div",{className:"wrapper-box",children:e.jsx("input",{className:"input",type:"number",value:u,onChange:h=>m(h.target.value),placeholder:"Enter amount to lend",required:!0,min:"0",step:"any",disabled:i})}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!o,children:i?"Processing...":"Confirm Lend"})})]})})})};async function Gt(n,r,o){try{const s=new I(r,n,{preflightCommitment:"confirmed"}),a=new C(P,s),t=await a.account.pool.fetch(o),i=t.mintA,c=t.mintB,[u]=l.findProgramAddressSync([t.amm.toBuffer(),i.toBuffer(),c.toBuffer(),b.Buffer.from(H)],a.programId),[m]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],a.programId),d=await _.token.associatedAddress({mint:i,owner:m}),h=await _.token.associatedAddress({mint:c,owner:m}),[p]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ie)],a.programId),[g]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],a.programId),[k]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(fe)],a.programId),w=await _.token.associatedAddress({mint:i,owner:s.wallet.publicKey}),y=await _.token.associatedAddress({mint:c,owner:s.wallet.publicKey}),[v]=l.findProgramAddressSync([o.toBuffer(),s.wallet.publicKey.toBuffer(),b.Buffer.from(z)],a.programId),x=await _.token.associatedAddress({mint:p,owner:v}),A=await _.token.associatedAddress({mint:k,owner:v});console.log("Sending redeem transaction...");const L=await a.methods.redeem().accounts({pool:o,poolAuthority:u,mintA:i,mintB:c,lendingPoolAuthority:m,lendingPoolTokenA:d,lendingPoolTokenB:h,lendingReceiptTokenMint:p,borrowReceiptTokenMint:g,lenderLendingBlockHeightTokenMint:k,lender:s.wallet.publicKey,lenderTokenA:w,lenderTokenB:y,lenderLendingReceiptToken:x,lenderLendingBlockHeightReceiptToken:A,payer:s.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc();return console.log("Redeem transaction signature:",L),L}catch(s){throw console.error("Error in redeem:",s),s}}const Ht=({pool:n,onSuccess:r})=>{const o=S(),{connection:s}=T(),[a,t]=f.useState(""),[i,c]=f.useState(!1),u=async m=>{if(m.preventDefault(),t(""),c(!0),!o){t("Please connect your wallet first"),c(!1);return}try{const d=new l(n.poolPk),h=await Gt(o,s,d);console.log(`Transaction URL: https://explorer.solana.com/tx/${h}`),r(h)}catch(d){console.error("Error redeeming:",d),t(d instanceof Error?d.message:"Failed to redeem")}finally{c(!1)}};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h3",{className:"section-title",children:"Redeem Tokens"}),a&&e.jsx("div",{className:"secondary-text",style:{color:"var(--error)"},children:a}),e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"note-text",style:{marginBottom:"var(--spacing-md)"},children:"Note: This will redeem all your lending receipt and return your tokenA."}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!o,children:i?"Processing...":"Confirm Redeem"})})]})]})};async function Ke(n,r,o,s,a){try{const t=new I(r,n,{commitment:"confirmed",preflightCommitment:"confirmed"}),i=new C(P,t),[c]=l.findProgramAddressSync([o.toBuffer(),s.toBuffer(),a.toBuffer()],i.programId),[u]=l.findProgramAddressSync([o.toBuffer(),s.toBuffer(),a.toBuffer(),b.Buffer.from(H)],i.programId),[m]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(se)],i.programId),[d]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(J)],i.programId),[h]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(ie)],i.programId),[p]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(Y)],i.programId),[g]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(ee)],i.programId),[k]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(fe)],i.programId),[w]=l.findProgramAddressSync([c.toBuffer(),b.Buffer.from(ke)],i.programId),y=await _.token.associatedAddress({mint:m,owner:new l(ce)}),v=await _.token.associatedAddress({mint:s,owner:u}),x=await _.token.associatedAddress({mint:a,owner:u}),A=await _.token.associatedAddress({mint:s,owner:d}),L=await _.token.associatedAddress({mint:a,owner:d}),M=pe.setComputeUnitLimit({units:1e6});console.log("Step 1: Creating pool...");let q="";await re(r,c)?console.log("Pool already exists, skipping..."):(q=await i.methods.createPool1().accounts({amm:o,mintA:s,mintB:a,pool:c,poolAuthority:u,poolAccountA:v,poolAccountB:x,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).preInstructions([M]).rpc({commitment:"confirmed"}),await r.confirmTransaction(q,"confirmed"),console.log("Transaction signature:",q)),console.log("Step 2: Creating pool...");let O="";await re(r,m)?console.log("Pool already exists, skipping..."):(O=await i.methods.createPool2().accounts({amm:o,mintA:s,mintB:a,pool:c,poolAuthority:u,liquidityMint:m,admin:ce,adminFeeAccount:y,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).preInstructions([M]).rpc({commitment:"confirmed"}),await r.confirmTransaction(O,"confirmed"),console.log("Transaction signature:",O)),console.log("Step 2: Initializing lending pool...");let Z="";await re(r,A)?console.log("Lending pool 1 already initialized, skipping..."):(Z=await i.methods.initLendingPool1().accounts({pool:c,mintA:s,mintB:a,lendingPoolAuthority:d,lendingPoolTokenA:A,lendingPoolTokenB:L,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId,rent:we}).rpc(),await r.confirmTransaction(Z,"confirmed")),console.log("Step 3: Initializing lending pool...");let U="";await re(r,h)?console.log("Lending pool 2 already initialized, skipping..."):(U=await i.methods.initLendingPool2().accounts({pool:c,lendingPoolAuthority:d,lendingReceiptTokenMint:h,borrowReceiptTokenMint:p,collateralReceiptTokenMint:g,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId,rent:we}).rpc(),await r.confirmTransaction(U,"confirmed")),console.log("Step 4: Initializing lending pool...");let V="";return await re(r,k)?console.log("Lending pool 3 already initialized, skipping..."):(V=await i.methods.initLendingPool3().accounts({pool:c,lendingPoolAuthority:d,lenderLendingBlockHeightMint:k,borrowerBorrowBlockHeightMint:w,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId,rent:we}).rpc(),await r.confirmTransaction(V,"confirmed")),{tx1:q,tx2:O,initTx1:Z,initTx2:U,initTx3:V}}catch(t){console.error("Error",t)}return{tx1:"",tx2:"",initTx1:"",initTx2:"",initTx3:""}}async function re(n,r){return await n.getAccountInfo(r)!==null}const Ne=({pool:n,onTxSuccess:r,poolStatus:o})=>{const s=S(),{connection:a}=T(),[t,i]=f.useState(!1);if(o===null)return e.jsx("div",{className:"wrapper",children:e.jsx("div",{className:"card-container",children:e.jsx("div",{className:"wrapper-box",children:e.jsx("div",{className:"align-center",children:"Loading pool status..."})})})});const c=o&&o.createPool1&&o.createPool2&&o.initLendingPool1&&o.initLendingPool2&&o.initLendingPool3,u=async()=>{try{if(!s){console.error("Wallet not connected");return}if(!n){console.error("Pool not found");return}i(!0);const m=await Ke(s,a,n==null?void 0:n.amm,n==null?void 0:n.mintA,n==null?void 0:n.mintB);r(m.toString())}catch(m){console.error("Error creating pool:",m)}finally{i(!1)}};return e.jsx("div",{className:"wrapper",children:e.jsx("div",{className:"card-container",children:!c&&e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"align-center",children:e.jsxs("div",{className:"segmented-progress-bar",children:[e.jsx("div",{className:`segment ${o!=null&&o.createPool1?"completed":"pending"}`,title:"Create Pool 1"}),e.jsx("div",{className:`segment ${o!=null&&o.createPool2?"completed":"pending"}`,title:"Create Pool 2"}),e.jsx("div",{className:`segment ${o!=null&&o.initLendingPool1?"completed":"pending"}`,title:"Init Lending Pool 1"}),e.jsx("div",{className:`segment ${o!=null&&o.initLendingPool2?"completed":"pending"}`,title:"Init Lending Pool 2"}),e.jsx("div",{className:`segment ${o!=null&&o.initLendingPool3?"completed":"pending"}`,title:"Init Lending Pool 3"})]})}),e.jsx("div",{className:"step",children:e.jsx("p",{children:"This pool has not initialized completely yet. Click the button below to initialize it."})}),e.jsx("div",{className:"align-center",children:e.jsx("button",{className:"button btn-primary",onClick:u,disabled:t,children:t?"Initializing Pool...":"Initialize Pool"})})]})})})},je=n=>n?!(n.createPool1&&n.createPool2&&n.initLendingPool1&&n.initLendingPool2&&n.initLendingPool3):!0,Pe=({aToB:n,bToA:r,tokenASymbol:o="A",tokenBSymbol:s="B"})=>{const[a,t]=f.useState(!1);return e.jsxs("div",{className:"combine-text",children:[e.jsx("span",{className:"body-text",children:"Price:"}),a?e.jsxs("span",{className:"code-text",children:["1 ",s," = ",r.toFixed(6)," ",o]}):e.jsxs("span",{className:"code-text",children:["1 ",o," = ",n.toFixed(6)," ",s]}),e.jsx("button",{className:"swap-direction-toggle",onClick:()=>t(!a)})]})},Ut=(n,r=4)=>`${n.substring(0,r)}...${n.substring(n.length-r)}`,Vt=({address:n="",shortened:r=!0})=>{const[o,s]=f.useState(!1),a=async()=>{try{await navigator.clipboard.writeText(n),s(!0),setTimeout(()=>s(!1),2e3)}catch(t){console.error("Failed to copy text: ",t)}};return e.jsxs("div",{className:"copyable-address",children:[e.jsx("span",{className:"code-text",title:n,children:r?Ut(n):n}),e.jsx("button",{className:"secondary-button",onClick:a,title:o?"Copied!":"Copy address",children:e.jsx("div",{className:`copy-icon ${o?"copied":""}`})})]})},Oe=({poolInfo:n})=>{const r=o=>{o.currentTarget.src=K};return e.jsx("div",{className:"combine-text",children:e.jsxs("div",{className:"info-row",children:[e.jsxs("div",{className:"token-pair-container",children:[e.jsx("img",{src:(n==null?void 0:n.tokenAIcon)||K,alt:(n==null?void 0:n.tokenASymbol)||"Token A",className:"token-icon",onError:r}),e.jsx("img",{src:(n==null?void 0:n.tokenBIcon)||K,alt:(n==null?void 0:n.tokenBSymbol)||"Token B",className:"token-icon",onError:r})]}),e.jsx("span",{className:"body-text",children:"Trading Pair: "}),e.jsxs("span",{className:"code-text address-pair",children:[e.jsxs("span",{children:[n==null?void 0:n.mintA.toString().slice(0,4),"...",n==null?void 0:n.mintA.toString().slice(-4)]}),e.jsx("span",{className:"secondary-text",children:"/"}),e.jsxs("span",{children:[n==null?void 0:n.mintB.toString().slice(0,4),"...",n==null?void 0:n.mintB.toString().slice(-4)]})]}),e.jsx("span",{className:"body-text",children:"Pool Address:"}),e.jsx(Vt,{address:(n==null?void 0:n.poolPk.toString())||""})]})})},Qt=()=>{const{poolAddress:n}=he(),r=X(),{connection:o}=T(),s=S(),{publicKey:a}=le(),[t,i]=f.useState(null),[c,u]=f.useState(!1),m=async()=>{try{if(!s||!n)return;u(!0);const d=await de(s,o,new l(n),a||new l(""));i(d)}catch(d){console.error("Error fetchDetails",d)}finally{u(!1)}};return f.useEffect(()=>{m()},[n,o,a]),e.jsxs("div",{className:"card-container",children:[e.jsx("div",{className:"back-button-container",children:e.jsx("button",{className:"button btn-primary",onClick:()=>r("/lend"),style:{marginBottom:"var(--spacing-md)"},children:"Back"})}),je((t==null?void 0:t.poolStatus)||null)?e.jsx(Ne,{pool:(t==null?void 0:t.poolInfo)||null,poolStatus:(t==null?void 0:t.poolStatus)||null,onTxSuccess:()=>{}}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section",children:e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx(Oe,{poolInfo:(t==null?void 0:t.poolInfo)||null}),e.jsx(Pe,{aToB:(t==null?void 0:t.poolInfo.aToB)||0,bToA:(t==null?void 0:t.poolInfo.bToA)||0,tokenASymbol:(t==null?void 0:t.poolInfo.tokenASymbol)||"",tokenBSymbol:(t==null?void 0:t.poolInfo.tokenBSymbol)||""})]})})}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"step",children:[e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"TokenA Address",address:t==null?void 0:t.poolInfo.mintA.toString()}),e.jsx(F,{label:"TokenB Address",address:t==null?void 0:t.poolInfo.mintB.toString()})]}),e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"Lending Pool TokenA Amount",address:t==null?void 0:t.lendingPoolInfo.tokenAAmount.toFixed(6)}),e.jsx(F,{label:"Lending Pool TokenB Amount",address:t==null?void 0:t.lendingPoolInfo.tokenBAmount.toFixed(6)})]}),e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"Loaned TokenA Amount",address:t==null?void 0:t.lendingPoolInfo.borrowReceiptSupply.toFixed(6)}),e.jsx(F,{label:"Collateral TokenB Amount",address:t==null?void 0:t.lendingPoolInfo.collateralReceiptSupply.toFixed(6)})]}),e.jsx("div",{className:"note-text",children:"Note: Profit sharing is based on time and capital contribution among lenders."}),e.jsx("div",{className:"note-text",children:"Lent funds in the lending pool earn 0.05% profit per block, paid from borrowers' collateral."}),e.jsx("div",{className:"note-text",children:"In case of mass liquidation events, lenders may not recover their full assets but receive a combination of lent assets and borrower collateral. Withdrawals follow a first-come-first-served principle."})]})}),c?e.jsx("div",{className:"loading-spinner"}):t?e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"Your TokenA Balance",address:t==null?void 0:t.userAssets.tokenAAmount}),e.jsx(F,{label:"You have lent tokenA",address:t.userAssets.lendingReceiptAmount})]})}),Number(t.userAssets.lendingReceiptAmount)===0?e.jsx("div",{className:"step",children:e.jsx(Wt,{pool:t==null?void 0:t.poolInfo,onSuccess:()=>{m()}})}):e.jsx("div",{className:"step",children:e.jsx(Ht,{pool:t==null?void 0:t.poolInfo,onSuccess:()=>{m()}})})]}):e.jsx("div",{className:"secondary-text",children:"Failed to load credit pool details"})]})]})};async function Jt(n,r,o){const s=await B(o,r.publicKey,!0),a=st(r.publicKey,s,r.publicKey,o),t=new Ce;t.add(a);const i=await n.getLatestBlockhash();t.recentBlockhash=i.blockhash,t.feePayer=r.publicKey;try{const c=await r.signTransaction(t),u=await n.sendRawTransaction(c.serialize());return await n.confirmTransaction({signature:u,blockhash:i.blockhash,lastValidBlockHeight:i.lastValidBlockHeight},"confirmed"),s}catch(c){throw console.error("Error initializing token account:",c),c}}async function Zt(n,r,o,s,a,t){try{console.log("Executing borrow...");const i=new I(r,n,{preflightCommitment:"confirmed"}),c=new C(P,i),u=await c.account.pool.fetch(o);console.log("Pool info:",{amm:u.amm.toString(),mintA:u.mintA.toString(),mintB:u.mintB.toString()});const[m]=l.findProgramAddressSync([u.amm.toBuffer(),s.toBuffer(),a.toBuffer(),b.Buffer.from(H)],c.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],c.programId),[h]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],c.programId),[p]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ee)],c.programId),[g]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ke)],c.programId),k=await _.token.associatedAddress({mint:s,owner:m}),w=await _.token.associatedAddress({mint:a,owner:m}),y=await _.token.associatedAddress({mint:s,owner:d}),v=await _.token.associatedAddress({mint:a,owner:d}),x=await _.token.associatedAddress({mint:s,owner:i.wallet.publicKey}),A=await _.token.associatedAddress({mint:a,owner:i.wallet.publicKey}),[L]=l.findProgramAddressSync([o.toBuffer(),i.wallet.publicKey.toBuffer(),b.Buffer.from(z)],c.programId),M=await _.token.associatedAddress({mint:h,owner:L}),q=await _.token.associatedAddress({mint:p,owner:L}),O=await _.token.associatedAddress({mint:g,owner:L});await $t(r,i.wallet.publicKey,s)||await Jt(r,i.wallet,s),console.log("Sending borrow transaction...");const U=pe.setComputeUnitLimit({units:1e6});return await c.methods.borrow(t).accounts({pool:o,poolAuthority:m,mintA:s,mintB:a,poolAccountA:k,poolAccountB:w,lendingPoolAuthority:d,lendingPoolTokenA:y,lendingPoolTokenB:v,borrowReceiptTokenMint:h,collateralReceiptTokenMint:p,borrowerBorrowBlockHeightTokenMint:g,borrower:i.wallet.publicKey,borrowerTokenA:x,borrowerTokenB:A,borrowerBorrowReceiptToken:M,borrowerCollateralReceiptToken:q,borrowerBorrowBlockHeightReceiptToken:O,payer:i.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).preInstructions([U]).rpc()}catch(i){throw console.error("Error in borrow:",i),i instanceof Error&&console.error("Error details:",{message:i.message,stack:i.stack}),i}}async function $t(n,r,o){try{const s=await B(o,r,!0);return await n.getAccountInfo(s)!==null}catch(s){return console.log("checkTokenAccount error:",s),!1}}const Xt=({pool:n,details:r,onSuccess:o})=>{const s=S(),{connection:a}=T(),[t,i]=f.useState(""),[c,u]=f.useState(!1),[m,d]=f.useState(""),h=Number(r.userAssets.collateralReceiptAmount)*r.poolInfo.bToA/_e*ve,p=async g=>{if(g.preventDefault(),i(""),u(!0),!s){i("Please connect your wallet first"),u(!1);return}try{const k=parseFloat(m);if(isNaN(k)||k<=0)throw new Error("Invalid borrow amount");if(k>h)throw new Error("Amount exceeds maximum borrowable amount");const w=new l(n.poolPk),y=new l(n.mintA),v=new l(n.mintB),x=await Zt(s,a,w,y,v,new ge(k));console.log(`Transaction URL: https://explorer.solana.com/tx/${x}`),d(""),o(x)}catch(k){console.error("Error borrowing:",k),i(k instanceof Error?k.message:"Failed to borrow")}finally{u(!1)}};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h3",{className:"section-title",children:"Borrow Token"}),t&&e.jsx("div",{className:"secondary-text",style:{color:"var(--error)"},children:t}),e.jsxs("form",{onSubmit:p,children:[e.jsx("div",{className:"card-container",children:e.jsx("input",{className:"input",type:"number",value:m,onChange:g=>d(g.target.value),placeholder:`Enter amount (max: ${h.toFixed(6)})`,required:!0,min:"0",max:h,step:"any",disabled:c})}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:c||!s,children:c?"Processing...":"Borrow"})})]})]})};async function Yt(n,r,o,s,a){try{console.log("Executing repay...");const t=new I(r,n,{preflightCommitment:"confirmed"}),i=new C(P,t),c=await i.account.pool.fetch(o),[u]=l.findProgramAddressSync([c.amm.toBuffer(),s.toBuffer(),a.toBuffer(),b.Buffer.from(H)],i.programId),[m]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],i.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(Y)],i.programId),[h]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ee)],i.programId),p=await _.token.associatedAddress({mint:s,owner:m}),g=await _.token.associatedAddress({mint:a,owner:m}),k=await _.token.associatedAddress({mint:s,owner:t.wallet.publicKey}),w=await _.token.associatedAddress({mint:a,owner:t.wallet.publicKey}),[y]=l.findProgramAddressSync([o.toBuffer(),t.wallet.publicKey.toBuffer(),b.Buffer.from(z)],i.programId),v=await _.token.associatedAddress({mint:d,owner:y}),x=await _.token.associatedAddress({mint:h,owner:y}),[A]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ke)],i.programId),L=await _.token.associatedAddress({mint:A,owner:y});console.log("Sending repay transaction...");const M=await i.methods.repay().accounts({mintA:s,mintB:a,pool:o,poolAuthority:u,lendingPoolAuthority:m,lendingPoolTokenA:p,lendingPoolTokenB:g,borrowReceiptTokenMint:d,collateralReceiptTokenMint:h,borrowerBorrowBlockHeightMint:A,borrower:t.wallet.publicKey,borrowerTokenA:k,borrowerTokenB:w,borrowerAuthority:y,borrowerBorrowReceiptToken:v,borrowerCollateralReceiptToken:x,borrowerBorrowBlockHeightReceiptToken:L,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc();return console.log("Repay transaction signature:",M),M}catch(t){throw console.error("Error in repay:",t),t}}const zt=({pool:n,onSuccess:r})=>{const o=S(),{connection:s}=T(),[a,t]=f.useState(""),[i,c]=f.useState(!1),u=async m=>{if(m.preventDefault(),t(""),c(!0),!o){t("Please connect your wallet first"),c(!1);return}try{const d=new l(n.poolPk),h=new l(n.mintA),p=new l(n.mintB),g=await Yt(o,s,d,h,p);console.log(`Transaction URL: https://explorer.solana.com/tx/${g}`),r(g)}catch(d){console.error("Error repaying:",d),t(d instanceof Error?d.message:"Failed to repay")}finally{c(!1)}};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h3",{className:"section-title",children:"Repay your loan and withdraw collateral"}),a&&e.jsx("div",{className:"secondary-text",style:{color:"var(--error)"},children:a}),e.jsx("form",{onSubmit:u,children:e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!o,children:i?"Processing...":"Repay"})})})]})};async function en(n,r,o,s,a){try{console.log("Executing borrow...");const t=new I(r,n,{preflightCommitment:"confirmed"}),i=new C(P,t),[c]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(J)],i.programId),u=await oe(s,c,!0),[m]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ee)],i.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(ke)],i.programId),h=oe(s,t.wallet.publicKey),[p]=l.findProgramAddressSync([o.toBuffer(),t.wallet.publicKey.toBuffer(),b.Buffer.from(z)],i.programId),g=await oe(m,p,!0),k=await _.token.associatedAddress({mint:d,owner:p});console.log("Sending borrow transaction...");const w=pe.setComputeUnitLimit({units:1e6});return{tx:await i.methods.depositCollateral(a).accounts({pool:o,lendingPoolAuthority:c,lendingPoolTokenB:u,collateralReceiptTokenMint:m,borrowerBorrowBlockHeightTokenMint:d,borrower:t.wallet.publicKey,borrowerTokenB:h,borrowerAuthority:p,borrowerCollateralReceiptToken:g,borrowerBorrowBlockHeightReceiptToken:k,payer:t.wallet.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).preInstructions([w]).rpc()}}catch(t){throw console.error("Error in borrow:",t),t instanceof Error&&console.error("Error details:",{message:t.message,stack:t.stack}),t}}const tn=({pool:n,onSuccess:r})=>{const o=S(),{connection:s}=T(),[a,t]=f.useState(""),[i,c]=f.useState(!1),[u,m]=f.useState(""),d=async h=>{if(h.preventDefault(),t(""),c(!0),!o){t("Please connect your wallet first"),c(!1);return}try{const p=parseFloat(u);if(isNaN(p)||p<=0)throw new Error("Invalid amount");const g=new l(n.poolPk),k=new l(n.mintB),w=await en(o,s,g,k,new ge(p));console.log(`Transaction URL: https://explorer.solana.com/tx/${w.tx}`),m(""),r(w.tx)}catch(p){console.error("Error lending:",p),t(p instanceof Error?p.message:"Failed to lend")}finally{c(!1)}};return e.jsxs("div",{className:"wrapper",children:[e.jsx("h3",{className:"section-title",children:"Deposit Collateral"}),a&&e.jsx("div",{className:"code-text",style:{color:"var(--error)"},children:a}),e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"card-container",children:e.jsx("input",{className:"input",type:"number",value:u,onChange:h=>m(h.target.value),placeholder:"Enter amount to deposit",required:!0,min:"0",step:"any",disabled:i})}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!o,children:i?"Processing...":"Deposit"})})]})]})},nn=()=>{const{connection:n}=T(),{publicKey:r}=le(),{poolAddress:o}=he(),s=S(),a=X(),[t,i]=f.useState(null),[c,u]=f.useState(!1),m=async()=>{try{if(!s||!o)return;u(!0);const d=await de(s,n,new l(o),r||new l(""));i(d)}catch(d){console.error("Error fetchDetails:",d)}finally{u(!1)}};return f.useEffect(()=>{m()},[o,n,r]),e.jsxs("div",{className:"card-container",children:[e.jsx("div",{className:"back-button-container",children:e.jsx("button",{className:"button btn-primary",onClick:()=>a("/borrow"),style:{marginBottom:"var(--spacing-md)"},children:"Back"})}),je((t==null?void 0:t.poolStatus)||null)?e.jsx(Ne,{pool:(t==null?void 0:t.poolInfo)||null,poolStatus:(t==null?void 0:t.poolStatus)||null,onTxSuccess:()=>{}}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"card-container",children:c?e.jsx("div",{className:"loading-spinner"}):t?e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx(Oe,{poolInfo:t.poolInfo}),e.jsx(Pe,{aToB:t.poolInfo.aToB||0,bToA:t.poolInfo.bToA||0,tokenASymbol:t.poolInfo.tokenASymbol||"",tokenBSymbol:t.poolInfo.tokenBSymbol||""})]})}),e.jsxs("div",{className:"step",children:[e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"You have borrowed tokenA",address:t.userAssets.borrowReceiptAmount}),e.jsx(F,{label:"You have collateral tokenB",address:t.userAssets.collateralReceiptAmount})]}),e.jsxs("div",{className:"info-row",children:[e.jsx(F,{label:"Available TokenA Amount",address:t.lendingPoolInfo.tokenAAmount.toFixed(6)}),e.jsx(F,{label:`Current Collateral Ratio(Min: ${(_e/ve*100).toFixed(2)}%)`,address:`${(Number(t.userAssets.collateralReceiptAmount)/(Number(t.userAssets.borrowReceiptAmount)*t.poolInfo.aToB)*100).toFixed(2)}%`})]}),e.jsx("div",{className:"note-text",children:"Note: Please ensure you provide sufficient collateral based on the minimum collateral ratio."}),e.jsx("div",{className:"note-text",children:"Your asset liquidation price is derived solely from Fall's liquidity pools and is independent of any other DEX or CEX."})]})]}),e.jsxs("div",{className:"step",children:[e.jsxs("div",{className:"row-align-center",children:[e.jsx(Xt,{pool:t==null?void 0:t.poolInfo,details:t,onSuccess:()=>{m()}}),e.jsx(tn,{pool:t==null?void 0:t.poolInfo,onSuccess:()=>{m()}})]}),Number(t.userAssets.borrowReceiptAmount)!=0||Number(t.userAssets.collateralReceiptAmount)!=0?e.jsx("div",{className:"step",children:e.jsx(zt,{pool:t==null?void 0:t.poolInfo,onSuccess:()=>{m()}})}):e.jsx("div",{className:"secondary-text"})]})]}):e.jsx("div",{className:"secondary-text",children:"Failed to load prices"})})})]})};async function on(n,r,o,s,a,t,i,c){try{const u=new I(r,n,{preflightCommitment:"confirmed"}),m=new C(P,u),[d]=l.findProgramAddressSync([s.toBuffer(),a.toBuffer(),t.toBuffer(),b.Buffer.from(H)],m.programId),[h]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(se)],m.programId),p=await B(a,d,!0),g=await B(t,d,!0),k=await B(a,n.publicKey,!0),w=await B(t,n.publicKey,!0),y=await B(h,n.publicKey,!0),v=await B(h,new l(ce),!0);return await m.methods.depositLiquidity(new me.BN(i),new me.BN(c)).accounts({amm:s,pool:o,poolAuthority:d,mintA:a,mintB:t,depositor:n.publicKey,liquidityMint:h,poolAccountA:p,poolAccountB:g,depositorAccountLiquidity:y,depositorAccountA:k,depositorAccountB:w,admin:ce,adminFeeAccount:v,payer:n.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc({skipPreflight:!1,maxRetries:3,commitment:"confirmed"})}catch(u){throw console.error("Error in depositLiquidity:",u),u}}const an=({pool:n,onSuccess:r})=>{const o=S(),{connection:s}=T(),[a,t]=f.useState(!1),[i,c]=f.useState(""),[u,m]=f.useState({amountA:"",amountB:""}),d=async h=>{h.preventDefault(),c(""),t(!0);try{const p=parseFloat(u.amountA),g=parseFloat(u.amountB),k=await on(o,s,new l((n==null?void 0:n.poolPk)||""),new l((n==null?void 0:n.amm)||""),new l((n==null?void 0:n.mintA)||""),new l((n==null?void 0:n.mintB)||""),p,g);r(k),m({amountA:"",amountB:""})}catch(p){console.error("Error depositing liquidity:",p),c(p instanceof Error?p.message:"Failed to deposit liquidity")}finally{t(!1)}};return e.jsx("div",{className:"wrapper",children:e.jsx("form",{onSubmit:d,children:e.jsxs("div",{className:"wrapper-container",children:[e.jsx("div",{className:"wrapper-header",children:i&&e.jsx("div",{className:"error-message",children:i})}),e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"input-header",children:"Token A"}),e.jsxs("div",{className:"token-input-section",children:[e.jsxs("div",{className:"token-selector",children:[e.jsx("img",{src:(n==null?void 0:n.tokenAIcon)||K,alt:(n==null?void 0:n.tokenASymbol)||"Token A",className:"token-icon",onError:h=>{h.target.src=K}}),e.jsx("span",{children:n==null?void 0:n.tokenASymbol})]}),e.jsx("input",{type:"number",step:"any",value:u.amountA,onChange:h=>m({...u,amountA:h.target.value}),placeholder:"0.00",required:!0,disabled:a})]})]}),e.jsx("div",{className:"plus-divider",children:e.jsx("div",{className:"plus-circle",children:"+"})}),e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"input-header",children:"Token B"}),e.jsxs("div",{className:"token-input-section",children:[e.jsxs("div",{className:"token-selector",children:[e.jsx("img",{src:(n==null?void 0:n.tokenBIcon)||K,alt:(n==null?void 0:n.tokenBSymbol)||"Token B",className:"token-icon",onError:h=>{h.target.src=K}}),e.jsx("span",{children:n==null?void 0:n.tokenBSymbol})]}),e.jsx("input",{type:"number",step:"any",value:u.amountB,onChange:h=>m({...u,amountB:h.target.value}),placeholder:"0.00",required:!0,disabled:a})]})]}),e.jsx("button",{type:"submit",className:"button btn-primary",disabled:a||!o||!u.amountA||!u.amountB,children:o?a?"Depositing Liquidity...":"Deposit Liquidity":"Connect Wallet"})]})})})};async function rn(n,r,o,s,a,t,i){try{const c=new I(r,n,{preflightCommitment:"confirmed"}),u=new C(P,c),[m]=l.findProgramAddressSync([s.toBuffer(),a.toBuffer(),t.toBuffer(),b.Buffer.from(H)],u.programId),[d]=l.findProgramAddressSync([o.toBuffer(),b.Buffer.from(se)],u.programId),h=await B(a,m,!0),p=await B(t,m,!0),g=await B(a,n.publicKey,!0),k=await B(t,n.publicKey,!0),w=await B(d,n.publicKey,!0);return await u.methods.withdrawLiquidity(i).accounts({pool:o,poolAuthority:m,depositor:n.publicKey,mintLiquidity:d,mintA:a,mintB:t,poolAccountA:h,poolAccountB:p,depositorAccountLiquidity:w,depositorAccountA:g,depositorAccountB:k,payer:n.publicKey,tokenProgram:R,associatedTokenProgram:D,systemProgram:E.programId}).rpc({skipPreflight:!1,maxRetries:3,commitment:"confirmed"})}catch(c){throw console.error("Error in depositLiquidity:",c),c}}const sn=({pool:n,amount:r,onSuccess:o})=>{const s=S(),{connection:a}=T(),[t,i]=f.useState(!1),[c,u]=f.useState(""),m=async d=>{d.preventDefault(),u(""),i(!0);try{const h=await rn(s,a,new l(n.poolPk),new l(n.amm),new l(n.mintA),new l(n.mintB),r);o(h)}catch(h){console.error("Error depositing liquidity:",h),u(h instanceof Error?h.message:"Failed to deposit liquidity")}finally{i(!1)}};return e.jsx("div",{className:"wrapper",children:e.jsx("form",{onSubmit:m,children:e.jsxs("div",{className:"wrapper-container",children:[e.jsxs("div",{className:"wrapper-header",children:[e.jsxs("div",{className:"body-text",children:["Your Liquidity: ",r," LP"]}),c&&e.jsx("div",{className:"error-message",children:c})]}),e.jsx("button",{type:"submit",className:"button btn-primary",disabled:t||!s||!r,children:s?t?"Withdrawing Liquidity...":"Withdraw Liquidity":"Connect Wallet"})]})})})},cn=()=>{const{connection:n}=T(),r=S(),{poolAddress:o}=he(),s=X(),{publicKey:a}=le(),[t,i]=f.useState(null),[c,u]=f.useState(!1),m=async()=>{try{if(!r)return;u(!0);const d=await de(r,n,new l(o||""),a||new l(""));i(d)}catch(d){console.error("Error fetchDetails",d)}finally{u(!1)}};return f.useEffect(()=>{m()},[o,n,a]),e.jsxs("div",{className:"card-container",children:[e.jsx("div",{className:"back-button-container",children:e.jsx("button",{className:"button btn-primary",onClick:()=>s("/farm"),style:{marginBottom:"var(--spacing-md)"},children:"Back"})}),je((t==null?void 0:t.poolStatus)||null)?e.jsx("div",{className:"section",children:e.jsx(Ne,{pool:(t==null?void 0:t.poolInfo)||null,poolStatus:(t==null?void 0:t.poolStatus)||null,onTxSuccess:m})}):e.jsxs("div",{className:"section",children:[c?e.jsx("div",{className:"step",children:e.jsx("div",{className:"code-text",children:"Loading prices..."})}):t?e.jsx(e.Fragment,{children:e.jsx("div",{className:"align-center",children:e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx(Pe,{aToB:t.poolInfo.aToB,bToA:t.poolInfo.bToA,tokenASymbol:t.poolInfo.tokenASymbol,tokenBSymbol:t.poolInfo.tokenBSymbol}),e.jsx("span",{className:"body-text",children:"Pool TokenA Amount:"}),e.jsx("span",{className:"code-text",children:t==null?void 0:t.poolInfo.tokenAAmount.toFixed(6)}),e.jsx("span",{className:"body-text",children:"Pool TokenB Amount:"}),e.jsx("span",{className:"code-text",children:t==null?void 0:t.poolInfo.tokenBAmount.toFixed(6)})]})})})}):e.jsx("div",{className:"step",children:e.jsx("div",{className:"code-text",style:{color:"var(--error)"},children:"Failed to load prices"})}),e.jsx(an,{pool:(t==null?void 0:t.poolInfo)||null,onSuccess:m}),e.jsx("div",{className:"wrapper"}),c?e.jsx("div",{className:"loading-state",children:e.jsx("div",{className:"code-text",children:"Loading your liquidity amount..."})}):t?e.jsx(sn,{pool:(t==null?void 0:t.poolInfo)||null,amount:parseFloat(t.userAssets.liquidityAmount),onSuccess:m}):e.jsx("div",{className:"error-state",children:e.jsx("div",{className:"code-text",children:"Failed to load your liquidity amount"})}),(a==null?void 0:a.toBase58())==(t==null?void 0:t.poolInfo.admin.toString())&&e.jsx("div",{className:"step",children:e.jsxs("div",{className:"info-row",children:[e.jsx("div",{className:"body-text",children:"You are the admin of this pool"}),e.jsxs("div",{className:"code-text",children:["You have ",t==null?void 0:t.poolInfo.adminFeeAmount," admin fee"]})]})})]})]})},ln=()=>{const n=X(),r=S(),{connection:o}=T(),{amm:s}=Fe(),[a,t]=f.useState(""),[i,c]=f.useState(!1),[u,m]=f.useState(""),[d,h]=f.useState({mintA:"",mintB:""}),p=async g=>{if(g.preventDefault(),t(""),m(""),c(!0),!r){t("Please connect your wallet first"),c(!1);return}if(!s){t("Please select an AMM first"),c(!1);return}try{const k=new l(s.pubkey),w=new l(d.mintA),y=new l(d.mintB),v=await Ke(r,o,k,w,y);m(v.toString()),h({mintA:"",mintB:""}),n("/farm")}catch(k){console.error("Error creating pool:",k),t(k instanceof Error?k.message:"Failed to create pool")}finally{c(!1)}};return e.jsxs("div",{className:"wrapper",children:[e.jsx("div",{className:"back-button-container",children:e.jsx("button",{className:"button btn-primary",onClick:()=>n("/farm"),style:{marginBottom:"var(--spacing-md)"},children:"Back"})}),e.jsx("div",{className:"wrapper-container",children:e.jsxs("div",{className:"wrapper-box",children:[e.jsx("div",{className:"section-title",children:"Create New Pool"}),e.jsx("div",{className:"note-text",children:"Note: Init pool need sign 5 times"}),a&&e.jsx("div",{className:"code-text",style:{color:"var(--error)"},children:a}),u&&e.jsxs("div",{children:[e.jsx("span",{className:"code-text",style:{color:"var(--primary)"},children:"Pool created successfully!"}),e.jsx("a",{href:`https://explorer.solana.com/tx/${u}`,target:"_blank",rel:"noopener noreferrer",className:"code-text",style:{marginLeft:"var(--spacing-xs)"},children:"View transaction"})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"wrapper-box",children:[e.jsx("span",{className:"sub-title",children:"AMM Pubkey"}),e.jsx("input",{className:"input",type:"text",value:s?s.pubkey:"",readOnly:!0,disabled:!0})]}),e.jsxs("div",{className:"wrapper-box",children:[e.jsx("span",{className:"sub-title",children:"Token A Mint Address"}),e.jsx("input",{className:"input",type:"text",value:d.mintA,onChange:g=>h({...d,mintA:g.target.value}),placeholder:"Enter token A mint address",required:!0,disabled:i})]}),e.jsxs("div",{className:"wrapper-box",children:[e.jsx("span",{className:"sub-title",children:"Token B Mint Address"}),e.jsx("input",{className:"input",type:"text",value:d.mintB,onChange:g=>h({...d,mintB:g.target.value}),placeholder:"Enter token B mint address",required:!0,disabled:i})]}),e.jsx("div",{className:"align-center",children:e.jsx("button",{type:"submit",className:"button btn-primary",disabled:i||!r,children:i?"Creating...":"Create Pool"})})]})]})})]})},dn=()=>e.jsxs("div",{className:"card-container",children:[e.jsx("h1",{className:"title",children:"Welcome to Fall Protocol"}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"What is Fall Protocol?"}),e.jsx("p",{children:"Fall is a decentralized lending protocol that operates without oracles. It provides shorting tools for any trading pair. Especially in the current meme coin market, anyone can create a lending pool on Fall immediately after a meme token is created, and profit by borrowing and shorting it at the right time."})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"Key Features"}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"🎯 Open Liquidations"}),e.jsx("p",{children:"Our unique oracle-free architecture ensures maximum security and reliability."}),e.jsx("p",{children:"Anyone can participate in the liquidation process and earn rewards. Simply spot liquidatable positions and click to claim your rewards!"})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"⚡ Instant Pool Creation"}),e.jsx("p",{children:"Create lending pools for any token pair immediately, perfect for catching new market opportunities."})]}),e.jsxs("div",{className:"feature",children:[e.jsx("h3",{children:"🎮 Meme Coin Shorting/Longing"}),e.jsx("p",{children:"Fall supports both USDC-based shorting and token-based longing strategies:"}),e.jsxs("ul",{className:"feature-list",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"USDC-based Shorting (MEME-USDC Pool):"})," Deposit USDC as collateral, borrow MEME tokens, sell them, and buy back at a lower price to profit."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Token-based Longing (USDC-MEME Pool):"})," Deposit MEME tokens as collateral, borrow USDC to buy more MEME, and sell at a higher price for profit."]})]})]})]}),e.jsxs("section",{className:"section",children:[e.jsx("h2",{children:"Why Choose Fall?"}),e.jsxs("ul",{className:"feature-list",children:[e.jsx("li",{children:"True Decentralization"}),e.jsx("li",{children:"No Oracle Dependencies"}),e.jsx("li",{children:"First-Mover Advantage for New Tokens"}),e.jsx("li",{children:"Flexible Trading Strategies"}),e.jsx("li",{children:"Community-Driven Development"})]})]})]}),un=[{path:"/",component:At,children:[{path:"",component:Se},{path:"introduction",component:dn,meta:{title:"Introduction"}},{path:"guide",component:Se,meta:{title:"Guide"}},{path:"amm",component:Ft,meta:{title:"AMM"}},{path:"swap",component:St,meta:{title:"Swap",requiresWallet:!0}},{path:"farm",component:Kt,meta:{title:"Farm"}},{path:"farm/create",component:ln,meta:{title:"Create Farm Pool"}},{path:"farm/:poolAddress",component:cn,meta:{title:"Farm Pool Item"}},{path:"lend",component:Tt,meta:{title:"Lender Pool"}},{path:"lend/:poolAddress",component:Qt},{path:"borrow",component:Lt,meta:{title:"Borrower Pool"}},{path:"borrow/:poolAddress",component:nn},{path:"liquidate",component:Le,meta:{title:"Liquidate"}},{path:"liquidate/:poolAddress",component:Le,meta:{title:"Liquidate"}}]}];function We(n){return n.map(r=>({path:r.path,element:e.jsx(r.component,{}),children:r.children?We(r.children):void 0}))}const mn=We(un),Ee="/fall/assets/favicon-BobBXiHe.png",pn=()=>{const{connected:n}=le(),{network:r,setNetwork:o}=mt(),s=it(mn);return e.jsxs("div",{className:"app-container",children:[e.jsxs("nav",{className:"app-nav",children:[e.jsxs("div",{className:"brand",children:[e.jsx("img",{src:Ee,alt:"Fall Logo",className:"app-logo"}),e.jsx("h1",{className:"fall-title",children:"Fall"})]}),e.jsxs("div",{className:"controls",children:[e.jsx(ht,{onChange:o,value:r}),e.jsx(ct,{className:"button btn-primary"})]})]}),e.jsx("main",{className:"app-main",children:n?s:e.jsx("div",{className:"connect-wallet",children:e.jsxs("div",{className:"wrapper",children:[e.jsx("img",{src:Ee,alt:"Fall Logo",className:"connect-logo"}),e.jsx("h2",{className:"section-title",children:"Welcome to Fall"}),e.jsx("p",{className:"section-title",children:"Connect your wallet to continue"})]})})}),e.jsxs("div",{className:"social-links-corner",children:[e.jsx("a",{href:"https://github.com/yimingWOW/fall",target:"_blank",rel:"noopener noreferrer",className:"text-link",children:e.jsx("i",{className:"fab fa-github"})}),e.jsx("a",{href:"https://x.com/fall_labs",target:"_blank",rel:"noopener noreferrer",className:"text-link",children:e.jsx("i",{className:"fa-brands fa-x-twitter"})})]})]})},hn=()=>e.jsx(Dt,{children:e.jsx(pn,{})});lt.createRoot(document.getElementById("root")).render(e.jsx(dt.StrictMode,{children:e.jsx(ut,{children:e.jsx(gt,{children:e.jsx(hn,{})})})}));
